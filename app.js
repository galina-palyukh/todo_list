document.addEventListener("DOMContentLoaded", function () {    let body = document.querySelector("body");    let table = document.querySelector("#todo__table");    let addBtn = document.querySelector(".box-add__btn");    let addInput = document.querySelector(".box-add__field");    addBtn.addEventListener("click", addTask);    addInput.addEventListener("keypress", function (keyEvent) {        if (keyEvent.key === "Enter") {            addTask();        }    });    const arr = JSON.parse(localStorage.getItem('listOfTitles')) || [];    function createTask(titleVariable) {        let row = document.createElement("tr");        table.appendChild(row);        let colTitle = document.createElement("td");        colTitle.classList.add("table-todo__title");        row.appendChild(colTitle);        colTitle.innerText = titleVariable;        let actions = document.createElement("td");        actions.innerHTML = '<div class="todo__table-actions"><a href ="#" class="todo__table-btn-remove">Delete</a><a href ="#" class="todo__table-btn-edit">Edit</a></div>';        row.appendChild(actions);        let removeBtn = actions.querySelector(".todo__table-btn-remove");        removeBtn.addEventListener("click", removeTask);        let editBtn = actions.querySelector(".todo__table-btn-edit");        editBtn.addEventListener("click", editTask);    }    function addTask(e) {        if (e) {            e.preventDefault();        }        // console.log(e);        let value = addInput.value.trim();        if (value !== "") {            if (table.style.display !== "table") {                table.style.display = "table";            }            createTask(value);            arr.push(value);            localStorage.setItem('listOfTitles', JSON.stringify(arr));            document.querySelector(".box-add__field").value = " ";        }    }    window.addEventListener("load", () => {        if (arr.length !== 0) {            table.style.display = "table";        }        for (let i = 0; i < arr.length; i++) {            let title = arr[i];            createTask(title);        }    });    function removeTask(e) {        e.preventDefault();        let tr = this.closest("tr");        let title = tr.querySelector(".table-todo__title").innerHTML;        let index = arr.indexOf(title);        tr.remove();        if (index >= 0) {            arr.splice(index, 1);        }        localStorage.setItem('listOfTitles', JSON.stringify(arr));        if (arr.length === 0) {            table.style.display = "none";        }    }    let popupEdit = document.querySelector(".edit-task-popup");    let editPopupBtnSubmit = document.querySelector(".edit-task-popup__btn-submit");    let editPopupBtnCancel = document.querySelector(".edit-task-popup__btn-cancel");    let editPopupBtnClose = document.querySelector(".edit-task-popup__btn-close");    let editPopupField = document.querySelector(".edit-task-popup__field");    let editButtonClicked;    function editTask(e) {        // debugger;        e.preventDefault();        editButtonClicked = this;        let row = editButtonClicked.closest("tr");        let title = row.querySelector(".table-todo__title").innerHTML;        openEditPopup(title);    }    editPopupBtnSubmit.addEventListener("click", () => {        let row = editButtonClicked.closest("tr");        let title = row.querySelector(".table-todo__title");        let index = arr.indexOf(title.innerHTML);        arr[index] = editPopupField.value;        localStorage.setItem('listOfTitles', JSON.stringify(arr));        title.innerHTML = editPopupField.value;        closeEditPopup();    });    editPopupBtnCancel.addEventListener("click", closeEditPopup);    editPopupBtnClose.addEventListener("click", closeEditPopup);    function openEditPopup(title) {        popupEdit.classList.add("_open");        body.style.overflowY = "hidden";        editPopupField.value = title;    }    function closeEditPopup() {        popupEdit.classList.remove("_open");        body.style.overflowY = "auto";    }});