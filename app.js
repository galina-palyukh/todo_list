document.addEventListener("DOMContentLoaded", function () {    let body = document.querySelector("body");    let table = document.querySelector("#todo__table");    let addBtn = document.querySelector(".box-add__btn");    let addInput = document.querySelector(".box-add__field");    addBtn.addEventListener("click", addTask);    addInput.addEventListener("keypress", function (keyEvent) {        if (keyEvent.key === "Enter") {            addTask();        }    });    const titleTaskArrLocalStorage = JSON.parse(localStorage.getItem('titleTaskArr')) || [];    const dateTaskArrLocalStorage = JSON.parse(localStorage.getItem("dateTaskArr")) || [];    function createTask(titleVariable, dateVariable) {        let row = document.createElement("tr");        table.appendChild(row);        let colTitle = document.createElement("td");        colTitle.classList.add("table-todo__title");        row.appendChild(colTitle);        colTitle.innerText = titleVariable;        let dateCell = document.createElement("td");        dateCell.classList.add("table-todo__date");        row.appendChild(dateCell);        dateCell.textContent = dateVariable;        let actions = document.createElement("td");        actions.innerHTML = '<div class="todo__table-actions"><a href ="#" class="todo__table-btn-remove"><i class="fa-solid fa-trash"></i></a><a href ="#" class="todo__table-btn-edit"><i class="fa-solid fa-pen-to-square"></i></a></div>';        row.appendChild(actions);        let removeBtn = actions.querySelector(".todo__table-btn-remove");        removeBtn.addEventListener("click", removeTask);        let editBtn = actions.querySelector(".todo__table-btn-edit");        editBtn.addEventListener("click", editTask);    }    function addTask(e) {        if (e) {            e.preventDefault();        }        // console.log(e);        let value = addInput.value.trim();        // let date = new Date();        let optionsDate = {            year: 'numeric',            month: '2-digit',            day: '2-digit'        };        let dateString = new Date().toLocaleDateString("en-GB", optionsDate);        let timeString = new Date().toLocaleTimeString("en-GB");        let date = dateString + " " + timeString;        if (value !== "") {            if (table.style.display !== "table") {                table.style.display = "table";            }            createTask(value, date);            titleTaskArrLocalStorage.push(value);            localStorage.setItem('titleTaskArr', JSON.stringify(titleTaskArrLocalStorage));            dateTaskArrLocalStorage.push(date);            localStorage.setItem('dateTaskArr', JSON.stringify(dateTaskArrLocalStorage));            document.querySelector(".box-add__field").value = " ";        }    }    window.addEventListener("load", () => {        if (titleTaskArrLocalStorage.length !== 0) {            table.style.display = "table";        }        for (let i = 0; i < titleTaskArrLocalStorage.length; i++) {            let title = titleTaskArrLocalStorage[i];            let date = dateTaskArrLocalStorage[i];            createTask(title, date);        }    });    function removeTask(e) {        e.preventDefault();        let tr = this.closest("tr");        let title = tr.querySelector(".table-todo__title").innerHTML;        let indexTitle = titleTaskArrLocalStorage.indexOf(title);        tr.remove();        if (indexTitle >= 0) {            titleTaskArrLocalStorage.splice(indexTitle, 1);            dateTaskArrLocalStorage.splice(indexTitle, 1);        }        localStorage.setItem('titleTaskArr', JSON.stringify(titleTaskArrLocalStorage));        localStorage.setItem('dateTaskArr', JSON.stringify(dateTaskArrLocalStorage));        if (titleTaskArrLocalStorage.length === 0) {            table.style.display = "none";        }    }    let popupEdit = document.querySelector(".edit-task-popup");    let editPopupBtnSubmit = document.querySelector(".edit-task-popup__btn-submit");    let editPopupBtnCancel = document.querySelector(".edit-task-popup__btn-cancel");    let editPopupBtnClose = document.querySelector(".edit-task-popup__btn-close");    let editPopupField = document.querySelector(".edit-task-popup__field");    let editButtonClicked;    function editTask(e) {        // debugger;        e.preventDefault();        editButtonClicked = this;        let row = editButtonClicked.closest("tr");        let title = row.querySelector(".table-todo__title").innerHTML;        openEditPopup(title);    }    editPopupBtnSubmit.addEventListener("click", () => {        let row = editButtonClicked.closest("tr");        let title = row.querySelector(".table-todo__title");        let index = titleTaskArrLocalStorage.indexOf(title.innerHTML);        titleTaskArrLocalStorage[index] = editPopupField.value;        localStorage.setItem('titleTaskArr', JSON.stringify(titleTaskArrLocalStorage));        title.innerHTML = editPopupField.value;        closeEditPopup();    });    editPopupBtnCancel.addEventListener("click", closeEditPopup);    editPopupBtnClose.addEventListener("click", closeEditPopup);    function openEditPopup(title) {        popupEdit.classList.add("_open");        body.style.overflowY = "hidden";        editPopupField.value = title;    }    function closeEditPopup() {        popupEdit.classList.remove("_open");        body.style.overflowY = "auto";    }});